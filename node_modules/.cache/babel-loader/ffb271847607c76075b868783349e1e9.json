{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\anime-quiz\\\\frontface\\\\src\\\\components\\\\Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createContext, useContext } from \"react\";\nimport Container from \"./Container\";\nimport QuestionBox from \"./QuestionBox\";\nimport Ladder from \"./Ladder.js\";\nimport OptionBox from \"./OptionBox.js\";\nimport Pause from \"./Pause\";\nimport \"../styles/Game.css\";\nimport { Grid, Typography, Button, ButtonGroup } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport Context from '../store/pause-context.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Game() {\n  _s();\n\n  // get all choices, questions, worth.\n  //\n  let actual_answer = null,\n      actual_id = null;\n  const [worths, setWorths] = useState([]);\n  const [choices, setChoices] = useState([]);\n  const [questions, setQuestions] = useState([]);\n  const [question, setQuestion] = useState({});\n  const [choice_items, setChoiceItems] = useState([]);\n  const [worthID, setWorthID] = useState(0);\n  const [prevID, setPrevID] = useState(1);\n  const [rightAnswer, setRightAnswer] = useState(false);\n  const [gameLost, setGameLost] = useState(false);\n  const [timerPaused, setTimerPaused] = useState(false);\n  const [actualAns, setActualAns] = useState({\n    id: '',\n    ans: ''\n  });\n  useEffect(() => {\n    fetch(\"http://localhost:8000/api/list-worth/\").then(response => response.json()).then(data => {\n      setWorths(data);\n    });\n    fetch(\"http://localhost:8000/api/list-q/\").then(response => response.json()).then(data => {\n      setQuestions(data);\n    });\n    fetch(\"http://localhost:8000/api/list-c/\").then(response => response.json()).then(data => {\n      setChoices(data);\n    });\n  }, []);\n  useEffect(() => {\n    console.log(\"boxHolder rendering\");\n    const question_items = questions.filter(question => {\n      return question.worth === worthID;\n    });\n    const question = question_items[Math.floor(Math.random() * question_items.length)];\n    setQuestion(question);\n    const choice_items = choices.filter(choice => choice.question === question.id);\n    choice_items.map(choice => {\n      if (choice.is_correct) {\n        let obj = {\n          id: choice.choice,\n          ans: choice.position\n        };\n        setActualAns(obj);\n      }\n    });\n    console.log(choice_items);\n    setChoiceItems(choice_items);\n  }, [worthID]);\n\n  function boxHolder() {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Context.Provider, {\n        value: {\n          timerPaused,\n          setTimerPaused\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(QuestionBox, {\n            worthID: worthID,\n            setWorthID: setWorthID,\n            question: question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(OptionBox, {\n            choice_items: choice_items // setRightAnswer = {setRightAnswer}\n            ,\n            worthID: worthID,\n            setWorthID: setWorthID,\n            getResult: getResult\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  } // prop function.\n\n\n  function getResult(isCorrect) {\n    if (isCorrect) {\n      // console.log(\" func get result says absolutely true\");\n      setWorthID(worthID + 1);\n    } else {\n      setGameLost(true);\n      console.log(gameLost);\n    }\n  }\n\n  function gameLostMessage() {\n    // const question_items = questions.filter((question) => {\n    //   return question.worth === worthID;\n    // });\n    // const question = question_items[Math.floor(Math.random() * question_items.length)];\n    // const choice_items = choices.filter( \n    //   (choice) => choice.question === question.id\n    // );\n    console.log(actual_id);\n    console.log(actual_answer);\n    let ans = null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          backgroundColor: 'white',\n          color: 'black'\n        },\n        children: [\" Wrong! The correct answer is \", /*#__PURE__*/_jsxDEV(\"i\", {\n          children: [\" \", alphabet(actualAns.id), \" \", actualAns.ans]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 94\n        }, this), \". \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          backgroundColor: 'white',\n          color: 'black'\n        },\n        children: [\" You take away \\u20B9\", amountWonOnLosing(), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"secondary\",\n        to: \"/\",\n        component: Link,\n        children: \" Back to Home \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this);\n  }\n\n  function putNextQuestion() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        alignItems: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          color: 'black'\n        },\n        onClick: () => setRightAnswer(true),\n        children: \" Right answer! Next\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 8\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n\n  const resetStates = () => {\n    if (rightAnswer) {\n      setRightAnswer(false);\n      setPrevID(worthID);\n    }\n  };\n\n  function continueGame() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [worthID === 1 ? boxHolder() : null, prevID < worthID ? putNextQuestion() : null, resetStates(), prevID === worthID && prevID > 1 ? boxHolder() : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this);\n  }\n\n  const amountWonOnLosing = () => {\n    let i = worthID;\n\n    if (i >= 5 && i < 10) {\n      return worths[5].cost;\n    } else if (i >= 10 && i < 15) {\n      return worths[10].cost;\n    }\n\n    return 0;\n  };\n\n  const alphabet = id => {\n    if (id === 1) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" A. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 16\n      }, this);\n    } else if (id === 2) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" B. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 14\n      }, this);\n    } else if (id === 3) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \" C. \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \" D. \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"game\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [worthID === 0 ? /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          alignItems: 'center'\n        },\n        color: \"secondary\",\n        onClick: () => setWorthID(worthID + 1),\n        children: \"Ready?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }, this) : null, gameLost ? gameLostMessage() : continueGame()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Ladder, {\n      worthID: worthID,\n      worths: worths\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Game, \"Hp0onQILnidmxzrGAOe6p+S6mGI=\");\n\n_c = Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["D:/Projects/anime-quiz/frontface/src/components/Game.js"],"names":["React","useState","useEffect","createContext","useContext","Container","QuestionBox","Ladder","OptionBox","Pause","Grid","Typography","Button","ButtonGroup","Link","Context","Game","actual_answer","actual_id","worths","setWorths","choices","setChoices","questions","setQuestions","question","setQuestion","choice_items","setChoiceItems","worthID","setWorthID","prevID","setPrevID","rightAnswer","setRightAnswer","gameLost","setGameLost","timerPaused","setTimerPaused","actualAns","setActualAns","id","ans","fetch","then","response","json","data","console","log","question_items","filter","worth","Math","floor","random","length","choice","map","is_correct","obj","position","boxHolder","getResult","isCorrect","gameLostMessage","backgroundColor","color","alphabet","amountWonOnLosing","putNextQuestion","alignItems","resetStates","continueGame","i","cost"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createContext, useContext } from \"react\";\r\nimport Container from \"./Container\";\r\nimport QuestionBox from \"./QuestionBox\";\r\nimport Ladder from \"./Ladder.js\";\r\nimport OptionBox from \"./OptionBox.js\";\r\nimport Pause from \"./Pause\";\r\nimport \"../styles/Game.css\";\r\nimport { Grid, Typography, Button, ButtonGroup } from \"@material-ui/core\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Context from '../store/pause-context.js';\r\n\r\n\r\nexport default function Game() {\r\n  // get all choices, questions, worth.\r\n  //\r\n  let actual_answer = null, actual_id = null;\r\n  const [worths, setWorths] = useState([]);\r\n  const [choices, setChoices] = useState([]);\r\n  const [questions, setQuestions] = useState([]);\r\n  const [question, setQuestion] = useState({});\r\n  const [choice_items, setChoiceItems] = useState([]);\r\n  \r\n  const [worthID, setWorthID] = useState(0);\r\n  const [prevID, setPrevID] = useState(1);\r\n  const [rightAnswer, setRightAnswer] = useState(false);\r\n  const [gameLost, setGameLost] = useState(false);\r\n\r\n  const [timerPaused, setTimerPaused] = useState(false);\r\n\r\n  const [actualAns, setActualAns] = useState({id : '', ans : ''});\r\n  \r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:8000/api/list-worth/\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setWorths(data);\r\n\r\n      });\r\n\r\n    fetch(\"http://localhost:8000/api/list-q/\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setQuestions(data);\r\n\r\n      });\r\n\r\n    fetch(\"http://localhost:8000/api/list-c/\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setChoices(data);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"boxHolder rendering\");\r\n    const question_items = questions.filter((question) => {\r\n      return question.worth === worthID;\r\n    });\r\n    const question = question_items[Math.floor(Math.random() * question_items.length)];\r\n\r\n    setQuestion(question);\r\n    const choice_items = choices.filter( \r\n      (choice) => choice.question === question.id\r\n    );\r\n    choice_items.map((choice) => {\r\n      if(choice.is_correct) {\r\n        let obj = {id:choice.choice, ans:choice.position};\r\n        setActualAns(obj);\r\n      }\r\n    })\r\n    console.log(choice_items);\r\n    setChoiceItems(choice_items);\r\n\r\n  }, [worthID]);\r\n\r\n  \r\nfunction boxHolder() {\r\n\r\n\r\n    return (\r\n      <Container>\r\n        <Context.Provider value = {{timerPaused, setTimerPaused}}>\r\n        <div id=\"wrapper\">\r\n          <QuestionBox worthID={worthID} \r\n          setWorthID={setWorthID}\r\n          question={question}\r\n          />\r\n\r\n          <OptionBox choice_items={choice_items} \r\n          // setRightAnswer = {setRightAnswer}\r\n          worthID = {worthID} \r\n          setWorthID={setWorthID}\r\n          getResult = {getResult}\r\n          />\r\n         </div>\r\n        </Context.Provider>\r\n      </Container>\r\n    )\r\n  }\r\n\r\n  // prop function.\r\n \r\nfunction getResult(isCorrect) {\r\n  if(isCorrect) {\r\n    // console.log(\" func get result says absolutely true\");\r\n    setWorthID(worthID + 1);\r\n  }\r\n  else {\r\n    setGameLost(true);\r\n\r\n    console.log(gameLost);\r\n  }\r\n\r\n}\r\n \r\n function gameLostMessage() {\r\n  // const question_items = questions.filter((question) => {\r\n  //   return question.worth === worthID;\r\n  // });\r\n  // const question = question_items[Math.floor(Math.random() * question_items.length)];\r\n  // const choice_items = choices.filter( \r\n  //   (choice) => choice.question === question.id\r\n  // );\r\n\r\n  console.log(actual_id);\r\n  console.log(actual_answer);\r\n\r\n  let ans = null;\r\n \r\n    return (\r\n      <div> \r\n        <h2 style={{backgroundColor: 'white', color: 'black'}}> Wrong! The correct answer is <i> {alphabet(actualAns.id)} {actualAns.ans}</i>. </h2>\r\n        <h3 style={{backgroundColor: 'white', color: 'black'}}> You take away ₹{amountWonOnLosing()} </h3>\r\n        <Button color=\"secondary\" to = \"/\" component={Link}> Back to Home </Button>\r\n      </div>\r\n    )\r\n }\r\n\r\n  function putNextQuestion() {\r\n\r\n    return (\r\n      <div style={{alignItems : 'center'}}> \r\n       <button style={{color: 'black'}} onClick={() => setRightAnswer(true)}> Right answer! Next</button>\r\n     </div> \r\n   )\r\n  }\r\n\r\n  const resetStates = () => {\r\n        if(rightAnswer) {\r\n          setRightAnswer(false);\r\n          setPrevID(worthID);\r\n        }\r\n  }\r\n\r\n  function continueGame() {\r\n    return (\r\n      <div>\r\n\r\n        {worthID === 1 ? boxHolder() : null}\r\n        {prevID < worthID ? putNextQuestion() : null}\r\n        {resetStates()}\r\n        {prevID === worthID && prevID > 1 ? boxHolder() : null}\r\n\r\n    </div>\r\n    )\r\n      \r\n  }\r\n\r\n  const amountWonOnLosing = () => {\r\n    let i = worthID;\r\n    if(i >= 5 && i < 10) {\r\n      return worths[5].cost;\r\n    }\r\n    else if(i >= 10 && i < 15) {\r\n      return worths[10].cost;\r\n    }\r\n    return 0; \r\n  }\r\n\r\n  const alphabet = (id) => {\r\n    if(id === 1) {\r\n        return <span> A. </span>;\r\n    }\r\n    else if(id === 2) {\r\n      return <span> B. </span>;\r\n    }\r\n    else if(id === 3) {\r\n      return <span> C. </span>;\r\n    }\r\n    return <span> D. </span>;\r\n}\r\n \r\n  return (\r\n    <div className=\"game\">\r\n\r\n      {/* {gameLost ? : } */}\r\n    \r\n\r\n      {/* ready button */}\r\n      <div className=\"container\"> \r\n\r\n      {worthID === 0 ? (\r\n                <Button style={{alignItems : 'center'}} color=\"secondary\" onClick={() => setWorthID(worthID + 1)}>\r\n                  Ready?\r\n                </Button>\r\n              ) : null}\r\n   \r\n\r\n        {gameLost ? gameLostMessage() : continueGame()}\r\n\r\n      </div>\r\n\r\n      <Ladder worthID={worthID} worths={worths} />\r\n\r\n    </div>\r\n  );\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}